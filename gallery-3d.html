<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <title>Yanxu | 幻境国画</title>
    <style>
        /* === 全局变量：幻影紫配色 === */
        :root {
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.7);
            --accent-purple: #a4508b;
            --accent-gradient: linear-gradient(326deg, #a4508b 0%, #5f0a87 74%);
        }

        body { 
            margin: 0; overflow: hidden; 
            background-color: #1a1a1a; 
            font-family: "Songti SC", "Noto Serif SC", serif; 
            color: var(--text-primary);
        }

        /* === 1. 背景流光动画 (Phantom Aurora) === */
        /* 仅在遮罩层显示时可见，作为氛围 */
        .aurora-bg {
            position: absolute; width: 100%; height: 100%; top: 0; left: 0; z-index: -1;
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
        }
        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* === 2. 准星 (极简圆点) === */
        #crosshair {
            position: absolute; top: 50%; left: 50%; width: 8px; height: 8px;
            background: rgba(255,255,255,0.8); border-radius: 50%;
            box-shadow: 0 0 10px rgba(255,255,255,0.5);
            transform: translate(-50%, -50%); pointer-events: none; z-index: 10;
            transition: transform 0.2s;
        }
        /* 准星微动效 */
        #crosshair.active { transform: translate(-50%, -50%) scale(1.5); background: #fff; }

        /* === 3. 详情弹窗 (液态玻璃风格) === */
        #detail-modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            /* 黑色半透明背景，聚焦内容 */
            background: rgba(0, 0, 0, 0.6); 
            backdrop-filter: blur(8px);
            z-index: 2000;
            flex-direction: column; align-items: center; justify-content: center;
            opacity: 0; transition: opacity 0.4s ease;
        }
        #detail-modal.active { opacity: 1; }
        
        /* 玻璃卡片 */
        #detail-content-box {
            display: flex; flex-direction: column; align-items: center;
            max-width: 90%; max-height: 85vh;
            padding: 20px;
            
            /* Glassmorphism 核心代码 */
            background: rgba(255, 255, 255, 0.05);
            box-shadow: var(--glass-shadow);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border-radius: 20px;
            border: 1px solid var(--glass-border);
            
            transform: scale(0.9); transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        #detail-modal.active #detail-content-box { transform: scale(1); }
        
        #detail-img {
            max-height: 55vh; max-width: 100%;
            border-radius: 4px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        #detail-info {
            margin-top: 20px; text-align: center;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        #modal-title { font-size: 32px; margin-bottom: 8px; font-weight: 300; letter-spacing: 4px; }
        #modal-desc { font-size: 14px; color: var(--text-secondary); letter-spacing: 1px; font-family: sans-serif; }
        
        /* 关闭按钮 (圆形玻璃) */
        #close-btn {
            position: absolute; top: -20px; right: -20px; 
            width: 44px; height: 44px; line-height: 44px; text-align: center;
            border-radius: 50%;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            color: white; font-size: 20px; cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        #close-btn:hover { background: rgba(255,255,255,0.3); transform: rotate(90deg); }

        /* === 4. 封面 (HUD) === */
        #blocker {
            position: absolute; width: 100%; height: 100%;
            /* 封面背景：这里使用深色玻璃，透出背后的极光 */
            background: rgba(20, 20, 30, 0.4);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            
            color: white;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            z-index: 999; cursor: pointer; transition: opacity 0.8s ease;
        }
        
        .cover-box {
            text-align: center;
            padding: 60px 80px;
            border-radius: 30px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
        }

        .cover-title { 
            font-size: 60px; margin-bottom: 5px; letter-spacing: 12px; 
            background: linear-gradient(to right, #fff, #bcaec5);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 4px 10px rgba(164, 80, 139, 0.3);
        }
        .cover-subtitle { 
            font-size: 16px; color: rgba(255,255,255,0.6); letter-spacing: 6px; 
            text-transform: uppercase; margin-bottom: 40px;
            border-bottom: 1px solid rgba(255,255,255,0.2);
            padding-bottom: 20px; display: inline-block;
        }
        
        /* 玻璃按钮 */
        .btn { 
            position: relative;
            padding: 15px 50px;
            border-radius: 50px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white; font-size: 16px; letter-spacing: 4px;
            cursor: pointer; overflow: hidden;
            transition: all 0.4s ease;
            box-shadow: 0 0 15px rgba(164, 80, 139, 0.2);
        }
        
        .btn:hover { 
            background: rgba(255, 255, 255, 0.2);
            box-shadow: 0 0 30px rgba(164, 80, 139, 0.6);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-2px);
        }
        
        /* 手机适配 */
        @media (max-width: 600px) {
            .cover-title { font-size: 40px; }
            .cover-box { padding: 40px 20px; width: 80%; }
            #detail-content-box { width: 95%; padding: 15px; }
        }
    </style>

    <script async src="https://unpkg.com/es-module-shims@1.8.0/dist/es-module-shims.js"></script>
    <script type="importmap">
    {
        "imports": {
            "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
            "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
        }
    }
    </script>
</head>
<body>
    <div id="crosshair"></div>

    <div class="aurora-bg"></div>

    <div id="detail-modal">
        <div id="detail-content-box">
            <div id="close-btn">✕</div>
            <img id="detail-img" src="" alt="Art">
            <div id="detail-info">
                <div id="modal-title">标题</div>
                <div id="modal-desc">简介...</div>
            </div>
        </div>
    </div>

    <div id="blocker">
        <div class="cover-box">
            <div class="cover-title">Yanxu</div>
            <div class="cover-subtitle">Infinite Art Gallery</div>
            <br>
            <div class="btn">ENTER</div>
        </div>
        <div style="margin-top: 20px; font-size: 12px; color: rgba(255,255,255,0.3); letter-spacing: 1px;">
            WASD 移动 · 鼠标 环视 · 点击 画作
        </div>
    </div>

    <script type="module" src="assets/js/gallery-3d.js"></script>

    <script>
        const modal = document.getElementById('detail-modal');
        const closeBtn = document.getElementById('close-btn');
        const crosshair = document.getElementById('crosshair');

        function closeModal() {
            modal.classList.remove('active');
            setTimeout(() => { modal.style.display = 'none'; }, 400);
            window.dispatchEvent(new Event('closeModal'));
        }
        
        closeBtn.onclick = closeModal;
        // 点击弹窗外部也可关闭
        modal.onclick = (e) => { if(e.target === modal) closeModal(); };

        // 简单的鼠标按下动画
        document.addEventListener('mousedown', () => crosshair.classList.add('active'));
        document.addEventListener('mouseup', () => crosshair.classList.remove('active'));
        document.addEventListener('touchstart', () => crosshair.classList.add('active'));
        document.addEventListener('touchend', () => crosshair.classList.remove('active'));
    </script>
</body>
</html>
